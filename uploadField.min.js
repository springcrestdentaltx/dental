!function(e){var t=function(t,i){this.$el=e(t),this.inputAttributes=i.attributes,this.options=i||{},this.config={fail:'<span class="error"><i class="la-cicon-exclamation" aria-hidden="true"></i>Oops! Upload failed</span>',notSupported:'<span class="error"><i class="la-cicon-exclamation" aria-hidden="true"></i>File type not supported</span>',maxSize:'<span class="error"><i class="la-cicon-exclamation" aria-hidden="true"></i>File exceeds max size</span>',fileSize:10485760,fileTypes:i.fileTypes,defaultLabel:""!==this.options.label?this.options.label:this.options.helpText},this.itemInfo={},this.insertHTML(this.inputAttributes),this.$uploadFieldInput=this.$el.find(":file"),this.$label=this.$el.find(".labelHolder"),this.$close=this.$el.find(".la-cicon-close"),this.init(this.$el)};t.prototype.init=function(e){this.attachEvents()},t.prototype.attachEvents=function(){var t=this;t.$el.on("change",":file",function(){var t=e(this),i=t.get(0).files?t.get(0).files.length:1,l=t.val().replace(/\\/g,"/").replace(/.*\//,""),n=document.getElementById(t.attr("id")).files[0];n&&t.trigger("fileselect",[i,l,n])}),t.$uploadFieldInput.on("fileselect",function(e,i,l,n){t.validateFiles(e,i,l,n)}),t.$uploadFieldInput.on("focus",function(){t.$uploadFieldInput.addClass("has-focus")}).on("blur",function(){t.$uploadFieldInput.removeClass("has-focus")}),t.$close.on("click",function(e){e.preventDefault(),t.toggleInputState("reset"),t.uploadItems("removeLastUploaded"),t.$uploadFieldInput.val("")})},t.prototype.uploadItems=function(e){var t=this;"object"!=typeof e?t.$uploadFieldInput.data("item",""):(t.$uploadFieldInput.data("item",JSON.stringify(e)),t.toggleInputState("close"))},t.prototype.toggleInputState=function(e){"reset"===e&&(e="upload",this.$label.html(this.config.defaultLabel)),this.$el.find(".la-cicon-"+e).show(),this.$el.find(".la-cicon-"+e).siblings("i").hide(),"upload"===e?this.$el.find(".status-label").show():this.$el.find(".status-label").hide()},t.prototype.encodeBaseSF=function(e,t,i){var l=this,n=new FileReader,a={};n.readAsDataURL(e),n.onload=function(){return a.id=t,a.string=n.result,a.size=e.size,a.extension=l.itemInfo.extension,a.icon=l.itemInfo.icon,i(a)},n.onerror=function(e){}},t.prototype.insertHTML=function(t){this.options.required;var i='<label for="'+t.id+'"><span class="labelHolder">'+this.config.defaultLabel+'</span><span class="btnS"><span class=""><i class="la-cicon-spinner icon-pulse icon-fw icon-load" style="display:none;"></i><i class="la-cicon-upload"></i><i class="la-cicon-close" style="display:none;"></i><span class="status-label"> Upload</span></span></span></label><span class="form-input-info">Maximum file size allowed: 10MB</label>',l=e("<input>",t).addClass("fileUpload");this.$el.append(l).append(i)},t.prototype.validateFiles=function(t,i,l,n){var a=this,o=a.$label.html(),s="",p=!1;e("label",a.$el).removeClass("has-error"),e(".error_container",a.$el.parent().parent()).remove(),a.itemInfo.extension=n.name.split(".").pop().toUpperCase(),a.itemInfo.icon="other",e.each(a.options.fileTypes,function(e,t){t.ext===a.itemInfo.extension&&(p=!0,a.itemInfo.icon=t.icon)}),t.target.value&&(s=t.target.value.split("\\").pop());var c='<span class="success"><i class="la-cicon-file-'+a.itemInfo.icon+'"></i>'+s+"</span>";s?(n.size>a.config.fileSize?a.updateLabel(a.config.maxSize):p?a.encodeBaseSF(n,s,function(e){a.uploadItems(e),a.updateLabel(c)}):a.updateLabel(a.config.notSupported),a.toggleInputState("close")):(a.$label.html(o),a.toggleInputState("load"))},t.prototype.updateLabel=function(e){void 0!==e&&this.$label.html(e)};var i=e.fn.uploadField;e.fn.uploadField=function(i){i=e.extend({},e(this).data(),"object"==typeof i&&i),new t(this,i)},e.fn.uploadField.Constructor=t,e.fn.uploadField.noConflict=function(){return e.fn.uploadField=i,this}}(jQuery);