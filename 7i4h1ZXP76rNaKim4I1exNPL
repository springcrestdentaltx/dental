
+function(){"use strict";var formData={"hash":"7i4h1ZXP76rNaKim4I1exNPL","info":"Please do not submit any Protected Health Information (PHI).","url":"https:\/\/smbleads.ibsmb.com\/v1\/leads\/7i4h1ZXP76rNaKim4I1exNPL","submit_value":"Thank you. Your submission has been sent.","submit_type":"message","method":"POST","form_name":"","lead_duration":3600,"advance_notice":null,"time_interval":1800,"input":[{"name":"name","ref_name":"name","type":"text","field_name":"Name","label":"","help_text":"Enter your name (Required)","required":1,"display_order":1,"options":[],"html":"","is_custom_field":0,"view_position":"","half_width":""},{"name":"email","ref_name":"email","type":"email","field_name":"Email","label":"","help_text":"Enter email (Required)","required":1,"display_order":2,"options":[],"html":"","is_custom_field":0,"view_position":"","half_width":""},{"name":"phone","ref_name":"phone","type":"tel","field_name":"Phone","label":"","help_text":"(XXX)XXX-XXXX (Required)","required":1,"display_order":3,"options":[],"html":"","is_custom_field":0,"view_position":"","half_width":""},{"name":"comments","ref_name":"comments","type":"textarea","field_name":"Comments","label":"","help_text":"Notes to the Doctor","required":0,"display_order":4,"options":[],"html":"","is_custom_field":0,"view_position":"","half_width":""},{"name":"__lf_ref_name","ref_name":"__lf_ref_name","type":"text","field_name":"__lf_ref_name","label":"","help_text":"","required":"0","display_order":"2","options":[],"html":"","view_position":"","half_width":"","is_custom_field":0},{"name":"__lf_title_name","ref_name":"__lf_title_name","type":"text","field_name":"__lf_title_name","label":"","help_text":"","required":"0","display_order":"2","options":[],"html":"","view_position":"","half_width":"","is_custom_field":0}],"campaignTrackerJsUrl":"https:\/\/smbleads.ibsmb.com\/js\/CampaignTracker.min.js?v1.150","formsCssUrl":"https:\/\/smbleads.ibsmb.com\/css\/forms.min.css?v1.150","uploadFieldJsUrl":"https:\/\/smbleads.ibsmb.com\/js\/uploadField.min.js?v1.150","fileTypes":[{"ext":"3DM","icon":"other"},{"ext":"3DS","icon":"other"},{"ext":"3DXML","icon":"image"},{"ext":"3G2","icon":"video"},{"ext":"3GA","icon":"audio"},{"ext":"3GP","icon":"video"},{"ext":"AC3","icon":"audio"},{"ext":"ACCDB","icon":"text"},{"ext":"AI","icon":"image"},{"ext":"AIF","icon":"audio"},{"ext":"AIFC","icon":"audio"},{"ext":"AIFF","icon":"audio"},{"ext":"AMR","icon":"audio"},{"ext":"ASF","icon":"video"},{"ext":"AVI","icon":"video"},{"ext":"BMP","icon":"image"},{"ext":"BPG","icon":"image"},{"ext":"CFG","icon":"text"},{"ext":"CGM","icon":"image"},{"ext":"CPF","icon":"other"},{"ext":"CPT","icon":"image"},{"ext":"CSS","icon":"text"},{"ext":"CSV","icon":"text"},{"ext":"DAT","icon":"other"},{"ext":"DB","icon":"text"},{"ext":"DBF","icon":"text"},{"ext":"DCM","icon":"image"},{"ext":"DDS","icon":"image"},{"ext":"DEX","icon":"image"},{"ext":"DGN","icon":"image"},{"ext":"DOC","icon":"document"},{"ext":"DOCX","icon":"document"},{"ext":"DWF","icon":"image"},{"ext":"DWG","icon":"document"},{"ext":"DXF","icon":"document"},{"ext":"EMF","icon":"image"},{"ext":"ENV","icon":"other"},{"ext":"EPS","icon":"image"},{"ext":"FLIF","icon":"image"},{"ext":"FLV","icon":"video"},{"ext":"FNT","icon":"other"},{"ext":"FON","icon":"other"},{"ext":"GED","icon":"other"},{"ext":"GIF","icon":"image"},{"ext":"GPX","icon":"other"},{"ext":"H261","icon":"video"},{"ext":"H263","icon":"video"},{"ext":"H264","icon":"video"},{"ext":"HDR","icon":"image"},{"ext":"HEIC","icon":"image"},{"ext":"HEIF","icon":"image"},{"ext":"HQX","icon":"text"},{"ext":"HTM","icon":"document"},{"ext":"HTML","icon":"document"},{"ext":"ICAL","icon":"other"},{"ext":"ICALENDAR","icon":"other"},{"ext":"ICS","icon":"other"},{"ext":"IFB","icon":"text"},{"ext":"IFF","icon":"audio"},{"ext":"IMG","icon":"image"},{"ext":"INDD","icon":"document"},{"ext":"INI","icon":"text"},{"ext":"JPE","icon":"image"},{"ext":"JPEG","icon":"image"},{"ext":"JPG","icon":"image"},{"ext":"KEY","icon":"other"},{"ext":"KEYCHAIN","icon":"other"},{"ext":"KML","icon":"other"},{"ext":"KMZ","icon":"other"},{"ext":"L24","icon":"audio"},{"ext":"LIFF","icon":"image"},{"ext":"LOG","icon":"text"},{"ext":"M3U","icon":"audio"},{"ext":"M4A","icon":"audio"},{"ext":"M4V","icon":"video"},{"ext":"MAX","icon":"other"},{"ext":"MDB","icon":"text"},{"ext":"MID","icon":"audio"},{"ext":"MIM","icon":"text"},{"ext":"MNC","icon":"image"},{"ext":"MOV","icon":"video"},{"ext":"MP3","icon":"audio"},{"ext":"MP4","icon":"video"},{"ext":"MPA","icon":"audio"},{"ext":"MPE","icon":"video"},{"ext":"MPEG","icon":"video"},{"ext":"MPG","icon":"video"},{"ext":"MPGA","icon":"video"},{"ext":"MSG","icon":"other"},{"ext":"NII","icon":"image"},{"ext":"OBJ","icon":"other"},{"ext":"ODA","icon":"image"},{"ext":"ODT","icon":"document"},{"ext":"OGA","icon":"audio"},{"ext":"OGG","icon":"audio"},{"ext":"OTF","icon":"other"},{"ext":"PAGES","icon":"other"},{"ext":"PCT","icon":"image"},{"ext":"PDB","icon":"text"},{"ext":"PDF","icon":"document"},{"ext":"PNG","icon":"image"},{"ext":"PPS","icon":"document"},{"ext":"PPT","icon":"document"},{"ext":"PPTX","icon":"document"},{"ext":"PRC","icon":"image"},{"ext":"PRF","icon":"text"},{"ext":"PS","icon":"image"},{"ext":"PSD","icon":"image"},{"ext":"PSP","icon":"image"},{"ext":"PSPIMAGE","icon":"image"},{"ext":"QT","icon":"video"},{"ext":"RA","icon":"audio"},{"ext":"RAM","icon":"audio"},{"ext":"RM","icon":"video"},{"ext":"RTF","icon":"text"},{"ext":"RTX","icon":"text"},{"ext":"RV","icon":"video"},{"ext":"SDF","icon":"other"},{"ext":"SKP","icon":"image"},{"ext":"SMI","icon":"other"},{"ext":"SMIL","icon":"other"},{"ext":"SRT","icon":"text"},{"ext":"STEP","icon":"image"},{"ext":"STL","icon":"other"},{"ext":"SVG","icon":"image"},{"ext":"SWF","icon":"other"},{"ext":"TAX2014","icon":"other"},{"ext":"TAX2015","icon":"other"},{"ext":"TEX","icon":"text"},{"ext":"TGA","icon":"image"},{"ext":"THM","icon":"image"},{"ext":"TIF","icon":"image"},{"ext":"TIFF","icon":"image"},{"ext":"TTF","icon":"other"},{"ext":"TXT","icon":"text"},{"ext":"U3D","icon":"image"},{"ext":"UUE","icon":"text"},{"ext":"VCARD","icon":"other"},{"ext":"VCF","icon":"other"},{"ext":"VML","icon":"image"},{"ext":"VOB","icon":"video"},{"ext":"VRML","icon":"image"},{"ext":"WAV","icon":"audio"},{"ext":"WEBM","icon":"audio"},{"ext":"WEBP","icon":"image"},{"ext":"WMA","icon":"audio"},{"ext":"WMF","icon":"image"},{"ext":"WMV","icon":"video"},{"ext":"WPD","icon":"document"},{"ext":"WPS","icon":"document"},{"ext":"X3D","icon":"image"},{"ext":"XCF","icon":"image"},{"ext":"XGL","icon":"image"},{"ext":"XLR","icon":"document"},{"ext":"XLS","icon":"document"},{"ext":"XLSX","icon":"document"},{"ext":"XML","icon":"text"},{"ext":"XPS","icon":"image"},{"ext":"XVRML","icon":"image"},{"ext":"YUV","icon":"image"}],"early":false};var config={assets:{jQueryUrl:"//code.jquery.com/jquery-2.1.4.min.js",jQueryUIUrl:"//code.jquery.com/ui/1.10.4/jquery-ui.min.js",jQueryUICssUrl:"//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.min.css",jQueryInputMaskUrl:"//cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/3.1.62/jquery.inputmask.bundle.min.js",sweetAlertUrl:"//cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js",sweetAlertCssUrl:"//cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css",ofcEditorCssUrl:"/sbframework/lead-form/css/lead-form.css",campaignTrackerJsUrl:formData.campaignTrackerJsUrl,formsCssUrl:formData.formsCssUrl,uploadFieldJsUrl:formData.uploadFieldJsUrl}};var availHours=null,hours=[],interval=formData.time_interval,advance_notice=new Date(),postData={},postFields={},refFieldsMapping={},onKeyupValidation=false,isMobile=false;if(null!=formData.advance_notice){advance_notice.setSeconds(advance_notice.getSeconds()+formData.advance_notice);}
var detectMobile=function(){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))){return true;}else{return false;}};var createPluginFunctions=function(){if(!$.fn.activeInputClass){$.fn.activeInputClass=function(options){options=$.extend({activeClass:'active'},options);var input=$(this),activeClass=options.activeClass;input.each(function(){$(this).on('focus blur',function(event){var e=event.type;if(e==='focus'){$(this).addClass(activeClass);}else if(e==='blur'&&!$(this).val()){$(this).removeClass(activeClass);}});});};};$.fn.isOnScreen=function(test){var height=this.outerHeight();var width=this.outerWidth();if(!width||!height){return false;}
var win=$(window);var viewport={top:win.scrollTop(),left:win.scrollLeft()};viewport.right=viewport.left+win.width();viewport.bottom=viewport.top+win.height();var bounds=this.offset();bounds.right=bounds.left+width;bounds.bottom=bounds.top+height;var deltas={top:viewport.bottom-bounds.top,left:viewport.right-bounds.left,bottom:bounds.bottom-viewport.top,right:bounds.right-viewport.left};if(typeof test=='function'){return test.call(this,deltas);}
return deltas.top>0&&deltas.left>0&&deltas.right>0&&deltas.bottom>0;};};var buildWhenAssetsComplete=function(){if(window.assetLoaderCompleted===undefined){setTimeout(buildWhenAssetsComplete,250);}
else{buildForm();}};var buildForm=function(){isMobile=detectMobile();createPluginFunctions();var form=new LeadsForm(formData);form.build($);};var AssetLoader=function(options){var complete=options.complete,me=this;this.getMissingAssets=function(){var assets=[];if(!me.checkCss(config.assets.formsCssUrl)){assets.push(config.assets.formsCssUrl);}
if(document.getElementsByTagName("body")[0].className.match(/t\d{4,5}/)){assets.push(config.assets.ofcEditorCssUrl);}
if(!window.CampaignTracker){assets.push(config.assets.campaignTrackerJsUrl);}
if(!window.jQuery){assets.push(config.assets.jQueryUrl);assets.push(config.assets.jQueryUIUrl);assets.push(config.assets.jQueryUICssUrl);assets.push(config.assets.jQueryInputMaskUrl);}else{if(!window.jQuery.ui){assets.push(config.assets.jQueryUIUrl);assets.push(config.assets.jQueryUICssUrl);}
if(!window.jQuery.inputmask){assets.push(config.assets.jQueryInputMaskUrl);}}
assets.push(config.assets.uploadFieldJsUrl);if(!window.swal){assets.push(config.assets.sweetAlertUrl);assets.push(config.assets.sweetAlertCssUrl);}
return assets;}
this.load=function(assets,idx){if(idx===undefined){idx=0;}
if(assets[idx]===undefined){window.assetLoaderCompleted=true;if(typeof complete==='function'){complete();}
return;}
var asset=me.createAssetElement(assets[idx]);if(asset){asset.onload=function(){me.load(assets,++idx);}
document.getElementsByTagName("head")[0].appendChild(asset);}else{me.load(assets,++idx);}}
this.createAssetElement=function(url){var fileExt=url.substr(1+url.lastIndexOf("/")).split('?')[0],asset;fileExt=fileExt.substr(fileExt.lastIndexOf(".")+1).toUpperCase();switch(fileExt){case'CSS':asset=me.createLink(url);break;case'JS':asset=me.createScript(url);break;}
return asset;}
this.createLink=function(url){var el=document.createElement("link");el.href=url;el.type='text/css';el.rel='stylesheet';return el;}
this.createScript=function(url){var el=document.createElement("script");el.src=url;el.type='text/javascript';return el;};this.checkCss=function(url){var ss=document.styleSheets;for(var i=0,max=ss.length;i<max;i++){if(ss[i].href===url){return true;}}
return false;};};var init=function(){if(window.assetLoader===undefined){window.assetLoader=new AssetLoader({complete:buildForm});var missingAssets=window.assetLoader.getMissingAssets();window.assetLoader.load(missingAssets);}else{buildWhenAssetsComplete()}};var addInitEventListener=function(){if(formData.early&&document.readyState!=="loading"){init();}else{var event=formData.early?'DOMContentLoaded':'load';var target=formData.early?document:window;target.addEventListener(event,function(){init();},false);}};addInitEventListener();var LeadsForm=function(formData){this.config={formData:formData,div:''};};LeadsForm.prototype.build=function($){var self=this;this.config.div=$('<div>',{class:'leadForm'});if(formData.form_name){$(this.config.div).append($('<h2>',{class:'form__name',text:formData.form_name}));}
var form=$('<form>',{action:'',name:this.config.formData.hash+'-'+new Date().getTime().toString()});var validationRules={};$.each(this.config.formData.input,function(key,obj){if(obj.ref_name=='preferred_time'&&!obj.is_custom_field){availHours=obj.options}
var inputId=obj.name.toLowerCase()+'-'+new Date().getTime().toString();var hasLabelClass=(obj.label!='')?' hasLabel':'';var formRow=$('<div>',{class:'form__group form-input-'+obj.name.toLowerCase()+hasLabelClass}),labelContainer=$('<div>',{class:'label_container'}),inputContainer=$('<div>',{class:'input_container'}),label=$('<label>',{text:obj.label,for:inputId}),input,helpText,attributes={};attributes['id']=inputId;attributes['name']=obj.name;attributes['data-ref-name']=obj.ref_name;attributes['class']='form__control';validationRules[obj.name]={label:obj.field_name};if(obj.help_text!==''&&obj.label==''){attributes['aria-label']=obj.help_text;}
if(obj.label!=''&&obj.required&&obj.required!="0"){$(label).append($('<span>',{class:'required-asterisk',text:'*'}));}
if(obj.name=='__lf_ref_name'||obj.name=='__lf_title_name'){formRow.attr('aria-hidden','true');attributes['tabindex']='-1';attributes['autocomplete']=false;attributes['aria-label']=obj.name;}
if(obj.required&&obj.required!="0"){validationRules[obj.name]['required']=true;}
switch(obj.type){case'tel':attributes['type']=obj.type;attributes['placeholder']=obj.help_text;attributes['data-inputmask']="'mask':'(999)999-9999'";validationRules[obj.name]['phoneNumber']=true;input=$('<input>',attributes);break;case'email':attributes['type']=obj.type;attributes['placeholder']=obj.help_text;validationRules[obj.name]['emailAddress']=true;input=$('<input>',attributes);break;case'text':attributes['type']=obj.type;attributes['placeholder']=obj.help_text;if(!obj.is_custom_field&&obj.ref_name==="preferred_date"){jQuery.extend(attributes,self.buildPreferredDateAttr(obj.ref_name));}
input=$('<input>',attributes);break;case'date':attributes['type']=(!isMobile)?'text':obj.type;attributes['placeholder']=obj.help_text;input=$('<input>',attributes);if(!isMobile){input.datepicker({onSelect:function(){self.callValidation(form,validationRules)}});}
break;case'select':$(inputContainer).addClass('select_wrapper');if(!$(formRow).hasClass('select__group')){$(formRow).addClass('select__group');}
input=$('<select>',attributes);$(input).append($('<option>',{value:'',text:obj.help_text}));if(null!=obj.options&&obj.options.length>0){if(obj.ref_name=='preferred_time'&&!obj.is_custom_field){break;}
$.each(obj.options,function(){$(input).append($('<option>',{value:this,text:this}));});}
break;case'textarea':attributes['placeholder']=obj.help_text;attributes['rows']=5;input=$('<textarea>',attributes);break;case'checkbox':$(inputContainer).addClass('checkbox_wrapper');if(!$(formRow).hasClass('checkbox__group')){$(formRow).addClass('checkbox__group');}
attributes['type']=obj.type;helpText=$('<span>',{class:'help_text',html:obj.help_text});if(null!=obj.options&&obj.options.length>0){input=$('<div>');var counter=0;var checkboxId=attributes['id'];$.each(obj.options,function(){counter++;attributes['id']=checkboxId+"-"+counter;var checkboxOptionDiv=$('<div>',{class:obj.name.toLowerCase()+"__label-input-container"});var checkboxOption=$('<input>',attributes);var optionLabel=$('<label>',{for:attributes['id']});var labelSpan=$('<span />').addClass('custom-input custom-checkbox');$(optionLabel).append(labelSpan).append(this);checkboxOption.attr('text',this).val(this);$(checkboxOptionDiv).append(checkboxOption).append(optionLabel);$(input).append(checkboxOptionDiv);});}else{input=$('<input>',attributes);}
break;case'radio':$(inputContainer).addClass('radio_wrapper');if(!$(formRow).hasClass('radio__group')){$(formRow).addClass('radio__group');}
attributes['type']=obj.type;helpText=$('<span>',{class:'help_text',html:obj.help_text});if(null!=obj.options&&obj.options.length>0){input=$('<div>');var counter=0;var radioButtonId=attributes['id'];$.each(obj.options,function(){counter++;attributes['id']=radioButtonId+"-"+counter;var radioOptionDiv=$('<div>',{class:obj.name.toLowerCase()+"__label-input-container"});var radioOption=$('<input>',attributes);var optionLabel=$('<label>',{for:attributes['id']});var labelSpan=$('<span />').addClass('custom-input custom-radio');$(optionLabel).append(labelSpan).append(this);radioOption.attr('text',this).val(this);$(radioOptionDiv).append(radioOption).append(optionLabel);$(input).append(radioOptionDiv);});}else{input=$('<input>',attributes);}
break;case'time':$(inputContainer).addClass('select_wrapper');if(!$(formRow).hasClass('select__group')){$(formRow).addClass('select__group');}
input=$('<select>',attributes);$(input).append($('<option>',{value:'',text:obj.help_text}));self.fillTimeField(input,obj.options.interval,obj.options.range.from,obj.options.range.to);break;case'file':attributes['type']=obj.type;attributes['placeholder']=obj.help_text;attributes['data-multiple-caption']="{count} files selected";validationRules[obj.name]['file']=true;input=$('<div>');input.addClass('form-input-uploadFile');input.uploadField({attributes:attributes,fileTypes:formData.fileTypes,label:obj.label,helpText:obj.help_text,required:obj.required});break;case'formatted_text':$(inputContainer).addClass('formatted_text_wrapper');if(!$(formRow).hasClass('formatted_text__group')){$(formRow).addClass('formatted_text__group');}
input=$('<div/>',{class:"formatted_text"});$(input).html(obj.html);break;default:break;}
if(obj.label!=''){$(labelContainer).append(label);}
$(inputContainer).append(helpText);$(inputContainer).append(input);$(formRow).append(labelContainer);$(formRow).append(inputContainer);$(form).append(formRow);});setTimeout(function(){var hiddenRow=$('<div>').attr({'aria-hidden':'true'});hiddenRow.append($('<input>').attr({type:'hidden',name:'__lf__ref_contact_field','aria-label':'__lf__ref_contact_field','tabindex':'-1'}));$(form).append(hiddenRow);},this.config.formData.input.length<7?2000:5000);$(form).append('<p class="leadFormInfo">'+this.config.formData.info+'</p>');$(form).append('<span class="form-wrap__submit"><input class="btn submit" name="submit" type="submit" value="Submit" /></span>');$(this.config.div).append(form);var $leadFormDiv=this.config.div;var $targetDivs=$("div.leadForm_"+this.config.formData.hash);$targetDivs.each(function(index,element){if(!$(this).children(':first').hasClass('leadForm')){$(this).append($($leadFormDiv));return false;}});var scriptsLength=$("body script[src*='"+this.config.formData.hash+"']").length;$("body script[src*='"+this.config.formData.hash+"']").each(function(index,element){if(!$(this).next().hasClass('leadForm')){$(this).after($leadFormDiv);return false;}
if(index==scriptsLength-1){$(this).after($leadFormDiv);}});$(form).find(':input').not(':submit').inputmask();$.each($(form).find(':input').not(':submit'),function(){postFields[this.name]=$(form).find(":input[name='"+this.name+"']");refFieldsMapping[this.getAttribute("data-ref-name")]=this.name;});if(null!=refFieldsMapping['preferred_date']&&!this.isCustomField(postFields[refFieldsMapping['preferred_date']])){if(null==postFields[refFieldsMapping['preferred_time']]){if(!isMobile){postFields[refFieldsMapping['preferred_date']].datepicker({minDate:advance_notice,onSelect:function(){self.callValidation(form,validationRules)}});}}else if(null!=postFields[refFieldsMapping['preferred_time']]&&!this.isCustomField(postFields[refFieldsMapping['preferred_time']])){var disabledDaysArray=availHours.filter(day=>day.closed===1).map(day=>day.day_of_week);postFields[refFieldsMapping['preferred_date']].datepicker({minDate:advance_notice,beforeShowDay:function(date){if(disabledDaysArray.includes(date.toString().split(' ')[0])){return[false,"closed","Closed"]}
return[true,"",""]},onSelect:function(){self.fillAvailableHours(form,$(this).datepicker('getDate'));self.callValidation(form,validationRules);}});}}
$('.form__control',form).on("keyup",function(e){self.callValidation(form,validationRules);});$(form).on('submit',function(e){e.preventDefault();onKeyupValidation=true;if(self.validateForm(form,validationRules)){self.submitForm(form);}else{self.scrollToError(form);}
return false;});if(isMobile){$('input[type="date"]',form).activeInputClass();$('input[type="date"]',form).addClass('mobile');$('input[type="date"]',form).attr("type","text").inputmask({'mask':'m/d/y','placeholder':'mm/dd/yyyy'});}
$.each($(form).find(":input[type='date']"),function(){if($(this).prop('type')!='date'){$(this).inputmask({'mask':'m/d/y','placeholder':'mm/dd/yyyy'});}});$('body').trigger('SMBLeadsFormReady');};LeadsForm.prototype.callValidation=function(form,validationRules){if(onKeyupValidation){this.validateForm(form,validationRules);}};LeadsForm.prototype.scrollToError=function(form)
{var firstErrorEl=$(form).find('label.error').first();if(!$(firstErrorEl).isOnScreen()){$('html, body').delay(200).animate({scrollTop:($(firstErrorEl).offset().top-200)},500);}};LeadsForm.prototype.fillAvailableHours=function(form,date)
{var self=this;$(form).find(':submit').attr('disabled',false);var dayName=$.datepicker.formatDate('D',date);var hours=[];$.each(availHours,function(){if(dayName===this.day_of_week){if(this.closed==1){hours.push('Closed');}else{$.each(this.hours,function()
{var hr=self.populateHours(this.from,this.to,interval,date);hours=hours.concat(hr);});}
return false;}});if($(hours).length==0){hours.push('Closed');}
$(postFields[refFieldsMapping['preferred_time']]).empty();$.each(hours,function(key,value){$(postFields[refFieldsMapping['preferred_time']]).append($('<option>',{value:value,text:value}));if(value=='Closed'){$(form).find(':submit').attr('disabled',true);}});};LeadsForm.prototype.fillTimeField=function(field,interval,from,to)
{var self=this;var hours=self.populateHours(from,to,interval);$.each(hours,function(key,value){$(field).append($('<option>',{value:value,text:value}));});};LeadsForm.prototype.populateHours=function(from,to,interval,date)
{var hours=[],date=(typeof date!=='undefined')?date:new Date(),first=Date.parse(date.getFullYear()+'/'+(date.getMonth()+1)+'/'+date.getDate()+" "+from),last=Date.parse(date.getFullYear()+'/'+(date.getMonth()+1)+'/'+date.getDate()+" "+to);while(first<last){var date=new Date(first);var hr=date.getHours()>12?date.getHours()-12:date.getHours();var am_pm=date.getHours()>=12?"PM":"AM";var min=date.getMinutes()<10?"0"+date.getMinutes():date.getMinutes();var time=hr+":"+min+" "+am_pm;hours.push(time);first+=interval*1000;}
return hours;}
LeadsForm.prototype.isCustomField=function(field){if(!field){return false;}
var is_custom_field;$.each(this.config.formData.input,function(){if(this.name==$(field)[0].name){is_custom_field=this.is_custom_field;return false;}});return is_custom_field;};LeadsForm.prototype.submitForm=function(form){$(':submit',form).prop('disabled',true);var self=this;postData={};postData['hash']=this.config.formData.hash;if(window.CampaignTracker!=undefined){var referredData=window.CampaignTracker.readCookie();}
if(referredData){postData['source']=referredData['source'];postData['medium']=(referredData['medium']!='undefined')?referredData['medium']:'';postData['campaign']=(referredData['campaign']!='undefined')?referredData['campaign']:'';postData['content']=(referredData['content']!='undefined')?referredData['content']:'';postData['term']=(referredData['term']!='undefined')?referredData['term']:'';}
$(form).find(':input').each(function(){if(this.type=='submit'||this.type=='button'){return;}
if(this.getAttribute('type')=='tel'){postData[this.name]=this.value.replace(/[^0-9\s]/g,'');}else if(this.getAttribute('type')=='date'&&$(this).prop('type')!='date'){postData[this.name]=self.convertDate(this.value);}else if(this.getAttribute('data-ref-name')=='preferred_date'&&!self.isCustomField($(this))){postData[refFieldsMapping['preferred_date']]='';if(isMobile){postData[refFieldsMapping['preferred_date']]=this.value;}else{postData[refFieldsMapping['preferred_date']]=self.convertDate(this.value);}}else if(this.type=="checkbox"||this.type=="radio"){postData[this.name]=$('input[name='+this.name+']:checked').map(function(_,el){return $(el).val();}).get();}else if(this.type=="file"){postData[this.name]=$(this).data('item');}else{postData[this.name]=this.value;}});$.ajax({url:this.config.formData.url,type:"POST",dataType:'json',data:postData,success:function(result){if(self.config.formData.submit_type=='message'){$(self.config.div).html("<p class='leadFormSuccess'>"+self.config.formData.submit_value+"</p>");}
if(self.config.formData.submit_type=='redirect'&&self.config.formData.submit_value!=''){window.location.href=self.config.formData.submit_value;}},error:function(result,status,error){if(result.hasOwnProperty('responseText')){var errorObj=$.parseJSON(result.responseText);if(!errorObj.error_message){swal({title:'Error!',text:result.status+" "+result.statusText,type:'error'});if(!$.support.placeholder){$("[placeholder]").each(function(){this.value=$(this).attr('placeholder');});}}else{swal({title:'Error!',text:errorObj.error_message,type:'error'});}}else{swal({title:'Error!',text:"Oops! Something went wrong!",type:'error'});}},complete:function(){$(':submit',form).prop('disabled',false);}});};LeadsForm.prototype.validateField=function(text,type,empty,fieldError){var regex='';switch(type){case'tel':regex=/^\(?[0-9]{3}(\-|\)) ?[0-9]{3}-[0-9]{4}$/;fieldError.message='Please enter a valid phone number: (123)456-7890';break;case'email':regex=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;break;case'float':regex=/^([0-9])+(\.|,)?([0-9])*$/;break;case'url':regex=/^https?:\/\/([^ ])+$/;break;case'int':regex=/^([0-9])+$/;break;case'bool':regex=/^(0|1){1}$/;break;case'date':regex=/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/;break;case'date2':regex=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/;break;case'textarea':regex=/[A-Za-z0-9 .'?!,@$#-_\n\r]/;break;default:regex=/^.+$/;break;}
if(empty&&text=='')return true;else if(regex!='')return regex.test(text);else return false;};LeadsForm.prototype.validateForm=function(form,validationRules){var self=this;var error=false;$(form).removeClass('has-error');$("input",form).removeClass('has-error');$("select",form).removeClass('has-error');$("textarea",form).removeClass('has-error');$(".error_container",form).remove();$.each(validationRules,function(key,fieldObj){var $field=$("[name="+key+"]",form);var errMessage='';if($field.attr('type')=='checkbox'){if(fieldObj.required&&!$field.is(":checked")){error=true;errMessage=fieldObj.label+' is required';$field.addClass('has-error');self.displayFieldError(form,key,errMessage);}}else if($field.attr('type')=='radio'){if(fieldObj.required&&!$field.is(":checked")){error=true;errMessage=fieldObj.label+' is required';$field.addClass('has-error');self.displayFieldError(form,key,errMessage);}}else if($field.is('select')){if(fieldObj.required&&!$field.val()){error=true;errMessage=fieldObj.label+' is required';$field.addClass('has-error');self.displayFieldError(form,key,errMessage);}}else if($field.is('textarea')){var fieldError={message:'Please enter valid '+fieldObj.label};if(!self.validateField($field.val(),'textarea',!fieldObj.required,fieldError)){error=true;$field.addClass('has-error');self.displayFieldError(form,key,fieldError.message);}}else if($field.attr('type')=='file'){var fieldError={message:'Please provide '+fieldObj.label};if(!self.validateField($field.val(),$field.attr('type'),!fieldObj.required,fieldError)){error=true;$("label[for="+$field.attr('id')+"]").addClass('has-error');$field.addClass('has-error');self.displayFieldError(form,key,fieldError.message);}}else if($field.attr('type')=='date'){var fieldError={message:'Please enter valid '+fieldObj.label};var rule='date2';if($field.prop('type')!='date'){rule='date';}
if(!self.validateField($field.val(),rule,!fieldObj.required,fieldError)){error=true;$field.addClass('has-error');self.displayFieldError(form,key,fieldError.message);}}else{var fieldError={message:'Please enter valid '+fieldObj.label};if(!self.validateField($field.val(),$field.attr('type'),!fieldObj.required,fieldError)){error=true;$field.addClass('has-error');self.displayFieldError(form,key,fieldError.message);}}});return!error;};LeadsForm.prototype.displayFieldError=function(form,name,msg){var errLabelContainer=$('<div>',{class:'error_container'}),errLabel=$('<label>',{id:name+'-error',class:'error'});errLabel.text(msg);$(errLabelContainer).append(errLabel.show());$('.form__group.form-input-'+name.toLowerCase(),form).append(errLabelContainer);};LeadsForm.prototype.buildPreferredDateAttr=function()
{var attributes={};attributes['data-inputmask']="'mask':'m/d/y', 'placeholder':'mm/dd/yyyy'";if(isMobile){var advNot=new Date(advance_notice);attributes['min']=advNot.getFullYear()+'-'+("0"+(advNot.getMonth()+1)).slice(-2)+'-'+("0"+advNot.getDate()).slice(-2);attributes['type']='date';}
return attributes;}
LeadsForm.prototype.convertDate=function(date)
{var dateArr=date.split("/");if(dateArr.length>0&&dateArr[0]){return dateArr[2]+"-"+dateArr[0]+"-"+dateArr[1];}
return date;}}();